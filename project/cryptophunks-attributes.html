<!DOCTYPE html>
<html lang="en" xmlns:v-bind="http://www.w3.org/1999/xhtml" xmlns:bind="http://www.w3.org/1999/xhtml">

<head>
        <script>
            try {
                var theme = localStorage.getItem('theme');
                if (theme === 'dark') {
                    document.documentElement.setAttribute('data-theme', 'dark');
                }
            } catch(e){}
        </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv=X-UA-Compatible content="IE=11">
    <link rel="shortcut icon" type="image/png" href="../public/images/favicon.ico">
    <title>CryptoPhunksV67: All Attributes</title>
    <meta name="description" content="All Phunk Types and Attributes" />
    <link rel="stylesheet" href="../public/components/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../public/components/bootstrap/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
    <link rel="stylesheet" href="../public/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../public/stylesheets/mainf500.css?v=13" charset="utf-8" >
    <link rel="stylesheet" type="text/css" href="../public/stylesheets/stylesf500.css?v=13" charset="utf-8" >

    <meta property="og:title" content="CryptoPhunksV67: All Attributes" />
    <meta property="og:description" content="All Phunk Types and Attributes" />

    <script src="../public/components/jquery-3.7.1.min.js"></script>
    <script src="../public/components/bootstrap/js/bootstrap.min.js"></script>
</head>
<body>

<header class="container main_header">
    <div class="row">
        <div class="col-lg-3 col-xs-2">
            <a href="../index.html" class="logo ">
            <svg viewBox="0 0 16 26" y="0" x="0"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-logo"></use></svg>
            <span class="hidden-xs hidden-sm">DystoLabz</span>
            </a>
        </div>
        <div class="col-lg-9 col-xs-10">
            <nav class="main_navigation">
                <ul class="list main_nav_list">
                    <li class="jsNavShow"><a class="active" href="../projectlist.html">Projects</a></li>
                    <li class="jsNavShow"><a class="" href="../bloglist.html">Writing</a></li>
                    <li class="jsNavShow"><a class="" href="../about.html">About</a></li>
                    <li class="jsNavShow"><a href="https://x.com/DystoLabz" target="_blank"><i class="fa fa-twitter"></i></a></li>
                    <li class="jsNavShow"><a id="dark-mode-toggle" href="javascript:void(0)" onclick="toggleDarkMode()" style="cursor: pointer;"><i class="fa fa-moon-o"></i></a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<div class="container" style="margin-top: 30px;">
    <div class="row">
        <div class="col-md-11 col-xs-12">
            <!-- Breadcrumb navigation with box -->
            <div class="breadcrumb-box">
                <a href="cryptophunks.html" class="breadcrumb-link">CryptoPhunksV67</a>
                <span class="breadcrumb-separator"> / </span>
                <span class="breadcrumb-current">Types and Attributes</span>
            </div>
            <!-- Main heading - 25% bigger (45px) and more spacing -->
            <h1 class="main-title">Types and Attributes</h1>
        </div>
    </div>
</div>

<!-- Phunk Types Section -->
<div class="container" style="margin-top: 30px;">
    <div class="row">
        <div class="col-md-12">
            <h3 class="section-title">Phunk Types</h3>
            <table class="attr-table">
                <thead>
                    <tr>
                        <th>Attribute</th>
                        <th>#</th>
                        <th>Examples</th>
                    </tr>
                </thead>
                <tbody id="types-tbody">
                    <!-- Dynamically populated -->
                </tbody>
            </table>
        </div>
    </div>
</div>


<!-- Attributes Sections (separated by trait type) -->
<div class="container" id="attributes-container">
    
    <!-- Dynamically populated with sections for each trait type -->
</div>

<!-- Attribute Counts Section -->
<div class="container" style="margin-top: 40px;">
    <div class="row">
        <div class="col-md-12">
            <h3 class="section-title">Attribute Counts</h3>
            <table class="attr-table">
                <thead>
                    <tr>
                        <th>Attribute</th>
                        <th>#</th>
                        <th>Examples</th>
                    </tr>
                </thead>
                <tbody id="counts-tbody">
                    <!-- Dynamically populated -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<style>
    /* Breadcrumb box styling - extended, no border */
    .breadcrumb-box {
        display: block;
        width: 100%;
        background-color: #f5f5f5;
        border: none;
        padding: 8px 15px;
        font-family: 'Montserrat', arial, helvetica, sans-serif;
        font-size: 16px;
        margin-bottom: 10px;
    }
    .breadcrumb-link {
        color: #B3BF44;
        text-decoration: none;
        font-weight: 700;
    }
    .breadcrumb-link:hover {
        text-decoration: underline;
    }
    .breadcrumb-separator {
        color: #666;
    }
    .breadcrumb-current {
        color: #333;
    }
    /* Main title - 25% bigger (45px) with more spacing, moved 5px down */
    .main-title {
        font-family: 'Montserrat', arial, helvetica, sans-serif;
        font-size: 45px;
        font-weight: 700;
        color: #333;
        margin-top: 25px;
        margin-bottom: 30px;
    }
    /* Horizontal divider line */
    .section-divider {
        border-top: 1px solid #e0e0e0;
        margin: 30px 0;
    }
    .section-title {
        font-family: 'Montserrat', arial, helvetica, sans-serif;
        font-size: 20px;
        font-weight: 700;
        color: #333;
        margin-bottom: 10px;
        margin-top: 20px;
        padding-bottom: 10px;
    }
    .attr-table {
        width: 100%;
        border-collapse: collapse;
        font-family: 'Montserrat', arial, helvetica, sans-serif;
        font-size: 16px;
    }
    .attr-table th {
        padding: 12px 8px;
        text-align: left;
        font-weight: 700;
        color: #333;
        border-bottom: 1px solid #ddd;
        font-size: 16px;
    }
    .attr-table td {
        padding: 8px 8px;
        text-align: left;
        border-bottom: 1px solid #eee;
        vertical-align: middle;
        font-size: 16px;
        color: #333;
    }
    .attr-table tr:hover {
        background-color: #fafafa;
    }
    .attr-name {
        font-weight: 700;
    }
    .attr-name a {
        color: #B3BF44;
        text-decoration: none;
    }
    .attr-name a:hover {
        text-decoration: underline;
    }
    .attr-count {
        color: #333;
        font-weight: 400;
    }
    /* Bigger phunk boxes - 48x48 like CryptoPunks, no gaps */
    .phunk-box {
        display: inline-block;
        width: 48px;
        height: 48px;
        background-color: #c3ff00;
        margin: 0;
        padding: 0;
        vertical-align: middle;
        text-decoration: none;
    }
    .phunk-box img {
        width: 48px;
        height: 48px;
        image-rendering: pixelated;
        display: block;
    }
    .phunk-box:hover {
        opacity: 0.8;
    }
    .examples-cell {
        white-space: nowrap;
        font-size: 0;
    }

    body.dark-mode {
        background-color: #1a1a1a !important;
        color: #ffffff !important;
    }

    body.dark-mode .main_footer {
        background-color: #1a1a1a !important;
        color: #ffffff !important;
    }

    body.dark-mode .main_header {
        background-color: #1a1a1a !important;
        color: #ffffff !important;
    }

    body.dark-mode a {
        color: #B3BF44 !important;
    }

    body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, body.dark-mode h4, body.dark-mode h5, body.dark-mode h6 {
        color: #ffffff !important;
    }

    body.dark-mode p, body.dark-mode .small {
        color: #ffffff !important;
    }

    body.dark-mode .attr-table td {
        color: #ffffff !important;
    }

    body.dark-mode .attr-table th {
        background-color: #2a2a2a !important;
        color: #ffffff !important;
        border-bottom: 1px solid #444 !important;
    }

    body.dark-mode .attr-table tr:hover {
        background-color: #2a2a2a !important;
    }

    body.dark-mode .breadcrumb-box {
        background-color: #2a2a2a !important;
        color: #ffffff !important;
    }

    body.dark-mode .breadcrumb-current {
        color: #ffffff !important;
    }

    body.dark-mode .main-title {
        color: #ffffff !important;
    }

    body.dark-mode .section-title {
        color: #ffffff !important;
    }
</style>

<script>
    // Load the JSON and populate tables
    fetch('../cryptophunks-v67-merged (1) (1).json?v=' + Date.now())
        .then(response => response.json())
        .then(data => {
            const items = data.collection_items;

            // Count types and attributes grouped by trait_type
            const typeCounts = {};
            const typeExamples = {};
            const traitsByCategory = {}; // { traitType: { value: { count, examples } } }

            items.forEach(item => {
                const index = item.index;

                item.attributes.forEach(attr => {
                    if (attr.trait_type === 'Type') {
                        const type = attr.value;
                        typeCounts[type] = (typeCounts[type] || 0) + 1;
                        if (!typeExamples[type]) typeExamples[type] = [];
                        if (typeExamples[type].length < 10) typeExamples[type].push(index);
                    } else {
                        const traitType = attr.trait_type;
                        const value = attr.value;

                        if (!traitsByCategory[traitType]) {
                            traitsByCategory[traitType] = {};
                        }
                        if (!traitsByCategory[traitType][value]) {
                            traitsByCategory[traitType][value] = { count: 0, examples: [] };
                        }
                        traitsByCategory[traitType][value].count++;
                        if (traitsByCategory[traitType][value].examples.length < 10) {
                            traitsByCategory[traitType][value].examples.push(index);
                        }
                    }
                });
            });

            // Sort types with custom priority: Martian, Yautja, Xenomorph first, then by rarity (count)
            const typesPriority = ['Martian', 'Yautja', 'Xenomorph'];
            const sortedTypes = Object.entries(typeCounts).sort((a, b) => {
                const aIndex = typesPriority.indexOf(a[0]);
                const bIndex = typesPriority.indexOf(b[0]);
                
                // If both are in priority list, sort by priority order
                if (aIndex !== -1 && bIndex !== -1) {
                    return aIndex - bIndex;
                }
                // If only a is in priority, put it first
                if (aIndex !== -1) return -1;
                // If only b is in priority, put it first
                if (bIndex !== -1) return 1;
                // If neither is in priority, sort by rarity (count)
                return a[1] - b[1];
            });

            // Helper function to create phunk box HTML with 48x48 images (clickable links to details page)
            function createPhunkBoxes(examples) {
                return examples.map(idx => {
                    const specialGifIds = [5865, 6850, 6922, 6996, 8913];
                    let imgSrc;
                    if (specialGifIds.includes(idx)) {
                        imgSrc = `../images/images_24x24/${idx}.gif`;
                    } else {
                        imgSrc = `../images/images_24x24/${idx}.png`;
                    }
                    return `<a href="cryptophunks-details.html?id=${idx}" class="phunk-box"><img src="${imgSrc}" alt="Phunk ${idx}" title="Phunk #${idx}"></a>`;
                }).join('');
            }

            // Populate types table
            const typesTbody = document.getElementById('types-tbody');
            sortedTypes.forEach(([type, count]) => {
                const examples = typeExamples[type] || [];
                const examplesHtml = createPhunkBoxes(examples.slice(0, 8));
                const searchUrl = `cryptophunks-search.html?trait_type=${encodeURIComponent('Type')}&value=${encodeURIComponent(type)}`;

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="attr-name"><a href="${searchUrl}">${type}</a></td>
                    <td class="attr-count">${count}</td>
                    <td class="examples-cell">${examplesHtml}</td>
                `;
                typesTbody.appendChild(row);
            });

            // Define trait type order: Aura first, then Skin Tone, Variant, others, then Armor/Cheeks/Face/Hands/Lips/Nose/Teeth, then Weapon, Pet, Species, Special, Character. Attribute Count is separate section at bottom.
            const traitTypeOrder = ['Aura', 'Skin Tone', 'Variant', 'Hair', 'Eyes', 'Eye Mask', 'Ears', 'Mouth', 'Beard', 'Neck', 'Emotion', 'Armor', 'Cheeks', 'Face', 'Hands', 'Lips', 'Nose', 'Teeth', 'Weapon', 'Pet', 'Species', 'Special', 'Character', 'Attributes'];

            // Get all trait types from data and ensure Species is always present in the order
            let allTraitTypes = Object.keys(traitsByCategory).filter(t => t !== 'Type');
            // Add 'Species' if missing
            if (!allTraitTypes.includes('Species')) allTraitTypes.push('Species');
            allTraitTypes.sort((a, b) => {
                const aIdx = traitTypeOrder.indexOf(a);
                const bIdx = traitTypeOrder.indexOf(b);
                if (aIdx === -1 && bIdx === -1) return a.localeCompare(b);
                if (aIdx === -1) return 1; // Put unknown traits at end
                if (bIdx === -1) return -1; // Put unknown traits at end
                return aIdx - bIdx;
            });
            // Debug output removed

            // Create sections for each trait type
            const container = document.getElementById('attributes-container');
            allTraitTypes.forEach(traitType => {
                const traits = traitsByCategory[traitType] || {};
                // Sort traits by count (rarest first)
                const sortedTraits = Object.entries(traits).sort((a, b) => a[1].count - b[1].count);

                // For Species, if empty, skip rendering the section entirely
                if (traitType === 'Species' && sortedTraits.length === 0) {
                    return;
                }

                // Always create section HTML for other cases
                const section = document.createElement('div');
                section.className = 'row';
                section.innerHTML = `
                    <div class="col-md-12">
                        <h3 class="section-title">${traitType}</h3>
                        <table class="attr-table">
                            <thead>
                                <tr>
                                    <th>Attribute</th>
                                    <th>#</th>
                                    <th>Examples</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                `;
                container.appendChild(section);

                const tbody = section.querySelector('tbody');
                if (sortedTraits.length === 0) {
                    const row = document.createElement('tr');
                    row.innerHTML = `<td colspan="3" style="color:#aaa;font-style:italic">No attributes of this type.</td>`;
                    tbody.appendChild(row);
                } else {
                    sortedTraits.forEach(([value, data]) => {
                        const examplesHtml = createPhunkBoxes(data.examples.slice(0, 8));
                        const searchUrl = `cryptophunks-search.html?trait_type=${encodeURIComponent(traitType)}&value=${encodeURIComponent(value)}`;
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td class="attr-name"><a href="${searchUrl}">${value}</a></td>
                            <td class="attr-count">${data.count}</td>
                            <td class="examples-cell">${examplesHtml}</td>
                        `;
                        tbody.appendChild(row);
                    });
                }
            });

            // Calculate attribute counts (how many phunks have 0, 1, 2, 3... attributes)
            const attrCountGroups = {};
            items.forEach(item => {
                const attrs = item.attributes || [];
                // Exclude Type, Animal, Species from attribute count (but still display them)
                const excludedTraits = ['Type', 'Animal', 'Species'];
                const filteredAttrs = attrs.filter(a => !excludedTraits.includes(a.trait_type));
                const count = filteredAttrs.length;
                if (!attrCountGroups[count]) {
                    attrCountGroups[count] = { count: 0, examples: [] };
                }
                attrCountGroups[count].count++;
                if (attrCountGroups[count].examples.length < 8) {
                    attrCountGroups[count].examples.push(item.index);
                }
            });

            // Populate attribute counts table
            const countsTbody = document.getElementById('counts-tbody');
            const sortedCounts = Object.keys(attrCountGroups).map(Number).sort((a, b) => a - b);
            sortedCounts.forEach(numAttrs => {
                const data = attrCountGroups[numAttrs];
                const examplesHtml = createPhunkBoxes(data.examples);
                const label = numAttrs === 1 ? '1 Attribute' : `${numAttrs} Attributes`;
                const searchUrl = `cryptophunks-search.html?attrcount=${numAttrs}`;
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="attr-name"><a href="${searchUrl}">${label}</a></td>
                    <td class="attr-count">${data.count}</td>
                    <td class="examples-cell">${examplesHtml}</td>
                `;
                countsTbody.appendChild(row);
            });
        })
        .catch(error => {
            console.error('Error loading JSON:', error);
            document.getElementById('types-tbody').innerHTML = '<tr><td colspan="6">Error loading data</td></tr>';
        });

        // Dark Mode Toggle
        function toggleDarkMode() {
            const body = document.body;
            const isDarkMode = body.classList.contains('dark-mode');
            const toggle = document.getElementById('dark-mode-toggle');
            if (isDarkMode) {
                body.classList.remove('dark-mode');
                localStorage.setItem('darkMode', 'false');
                toggle.innerHTML = '<i class="fa fa-moon-o"></i>';
            } else {
                body.classList.add('dark-mode');
                localStorage.setItem('darkMode', 'true');
                toggle.innerHTML = '<i class="fa fa-sun-o"></i>';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const toggle = document.getElementById('dark-mode-toggle');
            const darkModeEnabled = localStorage.getItem('darkMode') === 'true';
            if (darkModeEnabled) {
                document.body.classList.add('dark-mode');
                toggle.innerHTML = '<i class="fa fa-sun-o"></i>';
            }
        });
</script>

<footer class="main_footer">
    <div class="container">
        <div class="col-md-6 col-sm-6 col-xs-12 pull-right">
            <ul class="list footer_nav_list">
                <li class="jsNavShow"><a class="active" href="../projectlist.html">Projects</a></li>
                <li class="jsNavShow"><a class="" href="../bloglist.html">Writing</a></li>
                <li class="jsNavShow"><a class="" href="../about.html">About</a></li>
                <li class="jsNavShow"><a href="https://x.com/DystoLabz" target="_blank"><i class="fa fa-twitter"></i></a></li>
            </ul>
        </div>
    </div>
</footer>

<svg hidden>
    <defs>
        <g id="icon-logo">
            <path d="M0,3.5 C0,1.56700338 1.57093664,0 3.5,0 C5.43299662,0 7,1.57093664 7,3.5 C7,5.43299662 5.42906336,7 3.5,7 C1.56700338,7 0,5.42906336 0,3.5 Z M0,13.5 C0,11.5670034 1.57093664,10 3.5,10 C5.43299662,10 7,11.5709366 7,13.5 C7,15.4329966 5.42906336,17 3.5,17 C1.56700338,17 0,15.4290634 0,13.5 Z M0,22.5 C0,20.5670034 1.57093664,19 3.5,19 C5.43299662,19 7,20.5709366 7,22.5 C7,24.4329966 5.42906336,26 3.5,26 C1.56700338,26 0,24.4290634 0,22.5 Z M12,4 C12,2.8954305 12.8877296,2 14,2 C15.1045695,2 16,2.88772964 16,4 C16,5.1045695 15.1122704,6 14,6 C12.8954305,6 12,5.11227036 12,4 Z M12,14 C12,12.8954305 12.8877296,12 14,12 C15.1045695,12 16,12.8877296 16,14 C16,15.1045695 15.1122704,16 14,16 C12.8954305,16 12,15.1122704 12,14 Z M12,23 C12,21.8954305 12.8877296,21 14,21 C15.1045695,21 16,21.8877296 16,23 C16,24.1045695 15.1122704,25 14,25 C12.8954305,25 12,24.1122704 12,23 Z" id="logo"></path>
        </g>
    </defs>
</svg>

<script src="../public/javascripts/script.js"></script>

</body>
</html>

