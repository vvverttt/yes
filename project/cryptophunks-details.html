<!DOCTYPE html>
<html lang="en" xmlns:v-bind="http://www.w3.org/1999/xhtml" xmlns:bind="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv=X-UA-Compatible content="IE=11">
    <link rel="shortcut icon" type="image/png" href="../public/images/favicon.ico">
    <title>CryptoPhunksV69: Details</title>
    <meta name="description" content="CryptoPhunksV69 Phunk Details" />
    <link rel="stylesheet" href="../public/components/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../public/components/bootstrap/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
    <link rel="stylesheet" href="../public/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../public/stylesheets/mainf500.css?v=13" charset="utf-8" >
    <link rel="stylesheet" type="text/css" href="../public/stylesheets/stylesf500.css?v=13" charset="utf-8" >

    <meta property="og:title" content="CryptoPhunksV69: Details" />
    <meta property="og:description" content="CryptoPhunksV69 Phunk Details" />

    <script src="../public/components/jquery-2.2.4.min.js"></script>
    <script src="../public/components/bootstrap/js/bootstrap.min.js"></script>
</head>
<body>

<header class="container main_header">
    <div class="row">
        <div class="col-lg-3 col-xs-2">
            <a href="../index.html" class="logo ">
            <svg viewBox="0 0 16 26" y="0" x="0"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-logo"></use></svg>
            <span class="hidden-xs hidden-sm">DystoLabz</span>
            </a>
        </div>
        <div class="col-lg-9 col-xs-10">
            <nav class="main_navigation">
                <ul class="list main_nav_list">
                    <li class="jsNavShow"><a class="active" href="../projectlist.html">Projects</a></li>
                    <li class="jsNavShow"><a class="" href="../bloglist.html">Writing</a></li>
                    <li class="jsNavShow"><a class="" href="../about.html">About</a></li>
                    <li class="jsNavShow"><a href="https://x.com/DystoLabz" target="_blank"><i class="fa fa-twitter"></i></a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<div class="container" style="margin-top: 30px;">
    <div class="row">
        <div class="col-md-12">
            <!-- Breadcrumb navigation with box - extended, no border -->
            <div class="breadcrumb-box">
                <a href="cryptophunks.html" class="breadcrumb-link">CryptoPhunksV69</a>
                <span class="breadcrumb-separator"> / </span>
                <span class="breadcrumb-current" id="phunk-id-breadcrumb">Phunk #0</span>
            </div>
        </div>
    </div>
</div>

<!-- Main Content - matching CryptoPunks layout -->
<div class="container">
    <!-- Phunk image - large and prominent -->
    <div class="phunk-image-container">
        <img id="phunk-image" src="" alt="Phunk" class="phunk-detail-image">
    </div>

    <!-- Title and description below image -->
    <h1 id="phunk-title" class="phunk-detail-title">CryptoPhunk 0</h1>
    <p id="phunk-description" class="phunk-detail-description"></p>

    <!-- Attributes section -->
    <div class="attributes-section">
        <h3 class="section-title">Attributes</h3>
        <p id="attribute-count-text" class="attribute-count-text"></p>
        <div id="attributes-list" class="attributes-list">
            <!-- Dynamically populated -->
        </div>
    </div>
</div>

<style>
    .breadcrumb-box {
        display: block;
        width: 100%;
        background-color: #f5f5f5;
        border: none;
        padding: 8px 15px;
        font-family: 'Montserrat', arial, helvetica, sans-serif;
        font-size: 16px;
        margin-bottom: 0;
    }
    .breadcrumb-link {
        color: #B3BF44;
        text-decoration: none;
        font-weight: 700;
    }
    .breadcrumb-link:hover {
        text-decoration: underline;
    }
    .breadcrumb-separator {
        color: #666;
    }
    .breadcrumb-current {
        color: #333;
    }
    /* Full-width rectangle with green background like CryptoPunks */
    .phunk-image-container {
        background-color: #c3ff00;
        display: flex;
        justify-content: center;
        align-items: flex-end;
        width: 100%;
        height: 336px;
        padding: 0;
        margin-bottom: 30px;
        position: relative;
    }
    .phunk-detail-image {
        width: 300px;
        height: 300px;
        image-rendering: pixelated;
        display: block;
    }
    /* Title like CryptoPunks - no # sign */
    .phunk-detail-title {
        font-family: 'Montserrat', arial, helvetica, sans-serif;
        font-size: 48px;
        font-weight: 700;
        color: #333;
        margin-top: 0;
        margin-bottom: 15px;
    }
    /* Description with green link for type */
    .phunk-detail-description {
        font-family: 'Montserrat', arial, helvetica, sans-serif;
        font-size: 19px;
        color: #000;
        margin-top: -15px;
        margin-bottom: 30px;
    }
        text-decoration: none;
    }
    .attribute-count-text .count-highlight:hover {
        text-decoration: underline;
    }
    /* Attributes list - inline grid like CryptoPunks */
    .attributes-list {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 25px;
    }
    .attribute-item {
        font-family: 'Montserrat', arial, helvetica, sans-serif;
        font-size: 18px;
    }
    .attribute-name {
        color: #B3BF44;
        text-decoration: none;
        font-weight: 700;
        display: block;
        margin-bottom: 5px;
        font-size: 18px;
    }
    .attribute-name:hover {
        text-decoration: underline;
    }
    .attribute-count-info {
        color: #000;
        font-weight: 400;
        font-size: 17px;
    }
</style>

<script>
        // Toggle background color button logic
        document.addEventListener('DOMContentLoaded', function() {
            var btn = document.getElementById('toggle-bg-color');
            var container = document.querySelector('.phunk-image-container');
            var color1 = '#c3ff00';
            var color2 = '#B3BF44';
            if (btn && container) {
                btn.addEventListener('click', function() {
                    if (container.style.backgroundColor === color2) {
                        container.style.backgroundColor = color1;
                    } else {
                        container.style.backgroundColor = color2;
                    }
                });
            }
        });
    // Get phunk ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const phunkId = urlParams.get('id') || '0';

    // Set phunk image first
    const phunkImg = document.getElementById('phunk-image');
    phunkImg.src = `../../images/phunks/${phunkId}.png`;
    phunkImg.alt = `Phunk ${phunkId}`;
    phunkImg.onerror = function() { this.src = `../../images/images_24x24/${phunkId}.png`; };

    // Load JSON and get phunk data
    fetch('../cryptophunks-v69-merged (1) (1).json?v=' + Date.now())
        .then(response => response.json())
        .then(data => {
            const items = data.collection_items || [];
            const phunk = items.find(item => item.index == phunkId);

            // Use the name from JSON (e.g., "QuantumPhunk 95")
            const phunkName = phunk ? phunk.name : `Phunk ${phunkId}`;

            // Update page elements with JSON name
            document.getElementById('phunk-id-breadcrumb').textContent = phunkId;
            document.getElementById('phunk-title').textContent = phunkName;
            document.title = `${phunkName} - CryptoPhunksV69`;

            if (phunk) {
                const attrs = phunk.attributes || [];
                const type = attrs.find(a => a.trait_type === 'Type');
                const nonTypeAttrs = attrs.filter(a => a.trait_type !== 'Type' && a.trait_type !== 'Species');
                const attrCount = nonTypeAttrs.length;

                // Count how many phunks have same type
                let typeCount = 0;
                if (type) {
                    items.forEach(item => {
                        const itemAttrs = item.attributes || [];
                        const itemType = itemAttrs.find(a => a.trait_type === 'Type');
                        if (itemType && itemType.value === type.value) typeCount++;
                    });
                }

                // Count how many phunks have same attribute count
                let attrCountMatch = 0;
                items.forEach(item => {
                    const itemAttrs = (item.attributes || []).filter(a => a.trait_type !== 'Type' && a.trait_type !== 'Species');
                    if (itemAttrs.length === attrCount) attrCountMatch++;
                });

                // Set description like CryptoPunks: "one of 9 Alien Punks." with type as green link
                if (type) {
                    const descEl = document.getElementById('phunk-description');
                    descEl.innerHTML = `<strong style="color: black;">one of ${typeCount} <a href="cryptophunks-search.html?query=${encodeURIComponent(type.value)}" class="type-link">${type.value}</a> Phunks.</strong>`;
                }

                // Set attribute count text like CryptoPunks: "This Punk has 1 attribute, one of 333 with that many."
                const attrWord = attrCount === 1 ? 'attribute' : 'attributes';
                document.getElementById('attribute-count-text').innerHTML =
                    `This Phunk has <a href="cryptophunks-search.html?attrcount=${attrCount}" class="count-highlight">${attrCount} ${attrWord}</a>, one of ${attrCountMatch} with that many.`;

                // Count occurrences of each attribute (including Type and Species for display counts)
                const attrCounts = {};
                items.forEach(item => {
                    (item.attributes || []).forEach(attr => {
                        attrCounts[attr.value] = (attrCounts[attr.value] || 0) + 1;
                    });
                });

                // Populate attributes list - each on its own line like CryptoPunks
                const attrList = document.getElementById('attributes-list');
                attrs.forEach(attr => {
                    // Custom order: Species before Infinity Stone
                });
                // Custom sort: Species before Infinity Stone, then others
                const sortedAttrs = [...attrs];
                sortedAttrs.sort((a, b) => {
                    if (a.trait_type === 'Species') return -1;
                    if (b.trait_type === 'Species') return 1;
                    if (a.trait_type === 'Infinity Stone') return 1;
                    if (b.trait_type === 'Infinity Stone') return -1;
                    return 0;
                });
                sortedAttrs.forEach(attr => {
                    const count = attrCounts[attr.value] || 0;
                    const item = document.createElement('div');
                    item.className = 'attribute-item';
                    item.innerHTML = `
                        <a href="cryptophunks-search.html?query=${encodeURIComponent(attr.value)}" class="attribute-name">${attr.value}</a>
                        <span class="attribute-count-info"><strong>${count}</strong> Phunks have this.</span>
                    `;
                    attrList.appendChild(item);
                });
            }
        })
        .catch(error => {
            console.error('Error loading JSON:', error);
        });
</script>

<footer class="main_footer">
    <div class="container">
        <div class="col-md-6 col-sm-6 col-xs-12 pull-right">
            <ul class="list footer_nav_list">
                <li class="jsNavShow"><a class="active" href="../projectlist.html">Projects</a></li>
                <li class="jsNavShow"><a class="" href="../bloglist.html">Writing</a></li>
                <li class="jsNavShow"><a class="" href="../about.html">About</a></li>
                <li class="jsNavShow"><a href="https://x.com/DystoLabz" target="_blank"><i class="fa fa-twitter"></i></a></li>
            </ul>
        </div>
    </div>
</footer>

<svg hidden>
    <defs>
        <g id="icon-logo">
            <path d="M0,3.5 C0,1.56700338 1.57093664,0 3.5,0 C5.43299662,0 7,1.57093664 7,3.5 C7,5.43299662 5.42906336,7 3.5,7 C1.56700338,7 0,5.42906336 0,3.5 Z M0,13.5 C0,11.5670034 1.57093664,10 3.5,10 C5.43299662,10 7,11.5709366 7,13.5 C7,15.4329966 5.42906336,17 3.5,17 C1.56700338,17 0,15.4290634 0,13.5 Z M0,22.5 C0,20.5670034 1.57093664,19 3.5,19 C5.43299662,19 7,20.5709366 7,22.5 C7,24.4329966 5.42906336,26 3.5,26 C1.56700338,26 0,24.4290634 0,22.5 Z M12,4 C12,2.8954305 12.8877296,2 14,2 C15.1045695,2 16,2.88772964 16,4 C16,5.1045695 15.1122704,6 14,6 C12.8954305,6 12,5.11227036 12,4 Z M12,14 C12,12.8954305 12.8877296,12 14,12 C15.1045695,12 16,12.8877296 16,14 C16,15.1045695 15.1122704,16 14,16 C12.8954305,16 12,15.1122704 12,14 Z M12,23 C12,21.8954305 12.8877296,21 14,21 C15.1045695,21 16,21.8877296 16,23 C16,24.1045695 15.1122704,25 14,25 C12.8954305,25 12,24.1122704 12,23 Z" id="logo"></path>
        </g>
    </defs>
</svg>

<script src="../public/javascripts/script.js"></script>

</body>
</html>

